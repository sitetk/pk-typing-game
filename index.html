<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>„Éù„Ç±„É¢„É≥ „Çø„Ç§„Éî„É≥„Ç∞</title>

    <!-- 1. Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 2. Â§ñÈÉ®CSS („É°„Ç§„É≥) - ID„Çí‰ªò‰∏é„Åó„Å¶JS„Åã„ÇâÁõ£Ë¶ñÂèØËÉΩ„Å´„Åô„Çã -->
    <link id="main-style-link" rel="stylesheet" href="assets/css/style.css?v=20260106_0103">

    <style>
        /* --- ‰øÆÊ≠£„Éù„Ç§„É≥„Éà1: „ÇØ„É™„ÉÜ„Ç£„Ç´„É´CSSÔºàÂ§ñÈÉ®„Éï„Ç°„Ç§„É´„ÅåÈÅÖ„Çå„Å¶„ÇÇÂ¥©„Çå„Å™„ÅÑÊúÄ‰ΩéÈôê„ÅÆÂÆöÁæ©Ôºâ --- */
        body {
            opacity: 0;
            background-color: #f3f4f6;
            overflow-x: hidden;
            transition: opacity 0.3s ease-in;
        }


        /* Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´‰ªò‰∏é„Åô„Çã„ÇØ„É©„Çπ */
        body.is-loaded {
            opacity: 1;
        }

        #debug-error-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 230, 230, 0.95);
            color: #d00;
            z-index: 9999;
            padding: 10px;
            font-family: monospace;
        }
    </style>

    <script>
        /**
         * „Ç∑„É≥„Éó„É´„Å™CSSË™≠„ÅøËæº„ÅøÂæÖÊ©üÂá¶ÁêÜ
         */
        function activateStyles() {
            if (document.body.classList.contains('is-loaded')) return;

            // ÁîªÈù¢„ÇíË°®Á§∫
            document.body.classList.add('is-loaded');

            // „É¨„Ç§„Ç¢„Ç¶„ÉàÂÜçË®àÁÆó„ÇíÂº∑Âà∂
            window.dispatchEvent(new Event('resize'));
            setTimeout(() => window.dispatchEvent(new Event('resize')), 100);
            setTimeout(() => window.dispatchEvent(new Event('resize')), 300);
        }

        // CSSË™≠„ÅøËæº„ÅøÂÆå‰∫Ü„ÇíÂæÖ„Å§
        window.addEventListener('load', function () {
            // „Éö„Éº„Ç∏ÂÖ®‰Ωì„ÅÆ„É≠„Éº„ÉâÂæå„Å´Á¢∫ÂÆü„Å´ÂÆüË°å
            setTimeout(activateStyles, 50);
        });

        // „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó: DOMContentLoaded„Åß„ÇÇË©¶Ë°å
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(activateStyles, 200);
        });


        window.onerror = function (msg, url, line) {
            const overlay = document.getElementById('debug-error-overlay');
            if (overlay) {
                overlay.style.display = 'block';
                overlay.textContent += `[Error] ${msg} (${line})\n`;
            }
            return false;
        };
    </script>
</head>

<body class="bg-slate-50 text-[#333] font-sans antialiased selection:bg-blue-200 selection:text-[#333]">

    <div id="debug-error-overlay"></div>

    <div class="game-container relative min-h-screen flex flex-col items-center justify-center p-2">

        <button id="mute-btn"
            class="fixed top-4 left-4 z-[2000] bg-white/80 backdrop-blur border border-slate-300 rounded-full p-2 shadow hover:bg-slate-100 transition-colors"
            title="Èü≥ÈáèÂàá„ÇäÊõø„Åà">
            <span id="mute-icon" class="text-xl">üîä</span>
        </button>
        <button id="save-to-file-btn"
            class="fixed top-4 right-4 z-[2000] bg-white/90 border border-slate-300 rounded-full px-4 py-2 text-sm font-semibold shadow-lg hover:bg-slate-100 transition-colors">
            üíæ „Çª„Éº„Éñ
        </button>

        <!-- „Çø„Ç§„Éà„É´ÁîªÈù¢ -->
        <div id="title-screen"
            class="w-full max-w-4xl p-2 md:p-4 animate-in fade-in duration-500 flex flex-col items-center justify-center min-h-[40vh]">
            <header class="text-center mb-8">
                <h1 class="title-logo-container">
                    <img src="assets/img/title.png" alt="„Éù„Ç±„Çø„Ç§„Éî„É≥„Ç∞" class="title-logo-img mx-auto max-w-xs md:max-w-md"
                        onerror="this.style.display='none'; document.getElementById('title-fallback').style.display='block';">
                    <div id="title-fallback" style="display:none; font-size:2rem; font-weight:bold; color:#333;">POKEMON
                        TYPING</div>
                </h1>
            </header>
            <div id="load-status" class="text-center text-slate-500 mb-8 font-mono animate-pulse">„Éá„Éº„Çø„Çí „Çà„Åø„Åì„Çì„Åß„ÅÑ„Åæ„Åô...</div>
            <div id="start-panel"
                class="w-full flex justify-center items-center animate-in slide-in-from-bottom-4 duration-500 hidden">
                <button id="game-start-btn"
                    class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg transition transform hover:scale-105 active:scale-95">GAME
                    START</button>
            </div>
            <div id="save-select-screen"
                class="hidden w-full max-w-4xl p-4 md:p-6 animate-in fade-in duration-500 bg-white/90 rounded-3xl shadow-xl backdrop-blur-sm">
                <header class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-black text-[#333]">„Çª„Éº„Éñ„Éá„Éº„Çø„ÇíÈÅ∏„Å∂</h2>
                    <button id="save-return-btn" class="text-sm text-slate-500 hover:text-slate-800">„ÇÇ„Å©„Çã</button>
                </header>
                <div class="flex flex-col gap-2 mb-4 md:flex-row md:items-center md:justify-between">
                    <button id="import-from-file-btn"
                        class="w-full md:w-auto bg-slate-100 hover:bg-slate-200 text-slate-600 font-semibold px-4 py-2 rounded-2xl border border-slate-200 shadow-sm transition">„Éï„Ç°„Ç§„É´„Åã„Çâ„É≠„Éº„Éâ</button>
                    <p class="text-xs text-slate-500 md:text-right">localStorage ‚Üí „Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ ‚Üí ÂÜçË™≠Ëæº „Åß„Éá„Éº„Çø„ÇíÂæ©ÂÖÉ„Åß„Åç„Åæ„Åô</p>
                </div>
                <div id="save-slot-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
            </div>
            <input type="file" id="save-file-input" accept=".json" class="hidden">
            <div id="name-input-modal" class="hidden modal-overlay">
                <div class="modal-card">
                    <h3 class="text-xl font-bold text-slate-900 mb-2">„ÅØ„Åò„ÇÅ„Åã„Çâ „Éó„É¨„Ç§„Åô„Çã</h3>
                    <p class="text-sm text-slate-500 mb-4">„Éó„É¨„Ç§„É§„ÉºÂêç„Çí „Åç„ÇÅ„Å¶„ÄÅ„Çª„Éº„Éñ„Éá„Éº„Çø„Çí„Å§„Åè„Çç„ÅÜ</p>
                    <input type="text" id="name-input-field" placeholder="„Å™„Åæ„ÅàÔºà‰æãÔºö„Çµ„Éà„Ç∑Ôºâ">
                    <div class="modal-actions">
                        <button id="name-input-cancel" class="btn-secondary px-4 py-2 rounded-full">„Ç≠„É£„É≥„Çª„É´</button>
                        <button id="name-input-confirm"
                            class="px-4 py-2 rounded-full bg-blue-600 text-white font-semibold shadow-lg">„ÅØ„Åò„ÇÅ„Çã</button>
                    </div>
                </div>
            </div>
            <div id="import-target-modal" class="hidden modal-overlay">
                <div class="modal-card">
                    <h3 class="text-xl font-bold text-slate-900">„Éá„Éº„Çø„Çí „Åã„Åç„Åì„Åø„Åæ„Åô</h3>
                    <p id="import-data-summary" class="text-sm text-slate-500 mt-2">Ë™≠„ÅøËæº„Çì„Å†„Éá„Éº„ÇøÊÉÖÂ†±</p>
                    <p class="text-xs text-slate-400 mt-1">„Å©„ÅÆ„Çπ„É≠„ÉÉ„Éà„Å´ ‰∏äÊõ∏„Åç‰øùÂ≠ò„Åó„Åæ„Åô„ÅãÔºü</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mt-4">
                        <button class="import-slot-btn" data-slot-id="1">„Çπ„É≠„ÉÉ„Éà 1</button>
                        <button class="import-slot-btn" data-slot-id="2">„Çπ„É≠„ÉÉ„Éà 2</button>
                        <button class="import-slot-btn" data-slot-id="3">„Çπ„É≠„ÉÉ„Éà 3</button>
                    </div>
                    <div class="modal-actions mt-4">
                        <button id="import-cancel-btn" class="btn-secondary px-4 py-2 rounded-full">„Ç≠„É£„É≥„Çª„É´</button>
                    </div>
                </div>
            </div>
            <div id="mode-select"
                class="w-full hidden animate-in slide-in-from-bottom-4 duration-500 flex flex-col md:flex-row justify-center items-center gap-6">
                <button class="mode-btn w-full md:w-auto max-w-xs transition-transform hover:scale-105 active:scale-95"
                    data-mode="STORY">
                    <img src="assets/img/story_mode.png" alt="„Çπ„Éà„Éº„É™„Éº„É¢„Éº„Éâ"
                        class="w-full h-auto rounded-xl shadow-lg border-4 border-transparent hover:border-blue-400">
                </button>
                <button class="mode-btn w-full md:w-auto max-w-xs transition-transform hover:scale-105 active:scale-95"
                    data-mode="BATTLE">
                    <img src="assets/img/battle_mode.png" alt="„Éê„Éà„É´„É¢„Éº„Éâ"
                        class="w-full h-auto rounded-xl shadow-lg border-4 border-transparent hover:border-red-400">
                </button>
            </div>
        </div>

        <div id="story-region-select-screen"
            class="hidden w-full max-w-4xl p-5 md:p-6 lg:p-8 animate-in fade-in duration-500 bg-white/95 rounded-3xl shadow-2xl backdrop-blur-sm">
            <header class="relative flex items-center justify-center mb-6">
                <button id="story-region-back-btn"
                    class="absolute left-0 text-slate-500 font-bold hover:text-blue-600">‚Üê „ÇÇ„Å©„Çã</button>
                <div class="text-center space-y-1">
                    <p class="text-xs uppercase tracking-[0.4em] text-slate-400">Region Select</p>
                    <h2 class="text-3xl font-black text-[#1e293b]">„Çπ„Éà„Éº„É™„Éº „Çí „Åà„Çâ„Å∂</h2>
                </div>
            </header>
            <p class="text-center text-sm text-slate-500 mb-6">„Åµ„Åó„Åé„Å™ „Éù„Ç±„É¢„É≥„ÅÆ „Åõ„Åã„ÅÑ„Çí „Åò„ÇÜ„ÅÜ„Å´ „Åü„Å≥„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ„ÅØ„Åò„ÇÅ„Çã „É™„Éº„Ç∏„Éß„É≥„Çí „Åà„Çâ„Åº„ÅÜ„ÄÇ</p>
            <div class="story-region-grid grid gap-5 md:grid-cols-2">
                <button type="button" class="region-card region-card-primary" data-region="KANTO">
                    <div class="region-card-content">
                        <div class="region-card-art">
                            <img src="assets/img/kanto-story-img.png" alt="„Ç´„É≥„Éà„ÉºÂú∞ÊñπÁ∑®">
                        </div>
                        <div>
                            <p class="text-lg font-black text-slate-900">„Ç´„É≥„Éà„ÉºÂú∞ÊñπÁ∑®</p>
                            <p class="text-sm text-slate-500">„Éû„Çµ„É©„Çø„Ç¶„É≥„Åã„Çâ „ÅØ„Åò„Åæ„Çã „Éù„Ç±„É¢„É≥„ÅÆ „Åç„Åõ„Åç„ÄÇ</p>
                        </div>
                    </div>
                </button>
                <button type="button" class="region-card region-card-disabled" data-region="JOHTO" disabled
                    aria-disabled="true">
                    <div class="region-card-content">
                        <div class="region-card-art">
                            <img src="assets/img/jouto-story-img.png" alt="„Ç∏„Éß„Ç¶„ÉàÂú∞ÊñπÁ∑®">
                        </div>
                        <div>
                            <p class="text-lg font-black text-slate-900">„Ç∏„Éß„Ç¶„ÉàÂú∞ÊñπÁ∑®</p>
                            <p class="text-sm text-slate-500">„Å§„Åé„ÅÆ „Åü„Å≥„ÅØ „Åæ„Å† „Åü„ÅÑ„Åõ„Å§„Å™ „Åò„ÇÖ„Çì„Å≥ „Å°„ÇÖ„ÅÜ„ÄÇ</p>
                        </div>
                        <div class="region-card-coming-soon">coming soon</div>
                    </div>
                </button>
            </div>
        </div>

        <div id="story-stage-screen"
            class="hidden w-full max-w-4xl p-5 md:p-6 lg:p-8 animate-in fade-in duration-500 bg-white/95 rounded-3xl shadow-2xl backdrop-blur-sm">
            <header class="relative flex items-center justify-center mb-6">
                <button id="story-stage-back-btn" class="absolute left-0 text-slate-500 font-bold hover:text-blue-600">‚Üê
                    „ÇÇ„Å©„Çã</button>
                <div class="text-center space-y-1">
                    <p class="text-xs uppercase tracking-[0.4em] text-slate-400">Stage Select</p>
                    <h2 class="text-3xl font-black text-[#1e293b]">„Çπ„ÉÜ„Éº„Ç∏ „Çí „Åà„Çâ„Å∂</h2>
                </div>
            </header>
            <div class="story-stage-action-row mb-6">
                <button id="pokemon-box-btn" class="story-stage-action-btn" disabled>„Éù„Ç±„É¢„É≥„Éú„ÉÉ„ÇØ„Çπ</button>
                <button id="friendly-shop-btn" class="story-stage-action-btn story-stage-action-btn--disabled"
                    disabled>„Éï„É¨„É≥„Éâ„É™„Ç£„Ç∑„Éß„ÉÉ„Éó</button>
            </div>
            <div
                class="story-stage-screen-banner border border-slate-200 rounded-2xl overflow-hidden mb-6 flex flex-col md:flex-row gap-4 items-center">
                <img src="assets/img/kanto-story-img.png" alt="„Ç´„É≥„Éà„ÉºÂú∞ÊñπÁ∑®" class="story-stage-banner-img"
                    id="story-stage-banner-img">
                <div class="story-stage-banner-text">
                    <p id="story-stage-region-label" class="text-xs uppercase tracking-[0.4em] text-slate-400 mb-1">
                        „Ç´„É≥„Éà„ÉºÂú∞ÊñπÁ∑®</p>
                    <h3 id="story-stage-current-name" class="text-2xl font-black text-[#1e293b] mb-1">„Çπ„ÉÜ„Éº„Ç∏„Åå „ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                    <p id="story-stage-current-description" class="text-sm text-slate-500">„Çπ„ÉÜ„Éº„Ç∏„Çí „Åà„Çâ„Å∂„Å® „Åì„Åì„Å´ „Åò„Çá„ÅÜ„Åª„ÅÜ„Åå
                        „Å≤„Çá„ÅÜ„Åò„Åï„Çå„Åæ„Åô„ÄÇ</p>
                </div>
            </div>
            <div class="story-stage-grid" id="story-stage-grid"></div>

        </div>

        <!-- „Éë„Éº„ÉÜ„Ç£ÈÅ∏ÊäûÁîªÈù¢ -->
        <div id="party-select-screen"
            class="hidden w-full max-w-6xl p-4 md:p-8 animate-in fade-in duration-500 bg-white/90 rounded-3xl shadow-xl backdrop-blur-sm">
            <header class="relative flex items-center justify-center mb-6">
                <button id="party-back-btn" class="absolute left-0 text-slate-500 font-bold hover:text-blue-600">‚Üê
                    „ÇÇ„Å©„Çã</button>
                <h2 class="text-3xl font-black text-[#333]">„Éë„Éº„ÉÜ„Ç£ „Åõ„Çì„Åü„Åè</h2>
                <button
                    class="mode-switch-btn absolute right-0 text-sm bg-slate-100 px-3 py-1 rounded-full hover:bg-slate-200">„É¢„Éº„ÉâÂàáÊõø
                    ‚áÑ</button>
            </header>
            <p class="text-slate-500 mb-6 font-mono text-sm text-center">„ÅÑ„Å£„Åó„Çá„Å´ „Åü„Åü„Åã„ÅÜ „Éù„Ç±„É¢„É≥„Çí „Åà„Çâ„Çì„Åß„Å≠</p>
            <div class="party-cards-wrapper mb-4">
                <div id="party-grid" class="party-card-row"></div>
            </div>
            <div class="party-card-footer flex flex-col md:flex-row md:items-center md:justify-center gap-4">
                <div id="create-custom-card" class="party-create-card">
                    <span class="text-center">+ „Åò„Å∂„Çì„Åß „Åà„Çâ„Å∂<br><strong>ÔºàÊúÄÂ§ß6„Å¥„ÅçÔºâ</strong></span>
                </div>
                <div class="party-pagination-controls w-full md:w-auto justify-center">
                    <button id="party-prev-page" type="button" class="party-pagination-btn">Ââç„ÅÆ„Éö„Éº„Ç∏</button>
                    <span id="party-page-info" class="party-pagination-info">1 / 1</span>
                    <button id="party-next-page" type="button" class="party-pagination-btn">Ê¨°„ÅÆ„Éö„Éº„Ç∏</button>
                </div>
            </div>
        </div>

        <!-- „Åò„Å∂„Çì„ÅÆ„Éù„Ç±„É¢„É≥„Çí„Åà„Çâ„Å∂ÁîªÈù¢ -->
        <div id="custom-party-screen"
            class="hidden w-full max-w-6xl p-4 md:p-6 animate-in fade-in duration-500 bg-white/90 rounded-3xl shadow-xl backdrop-blur-sm">
            <header class="relative flex items-center justify-between mb-4">
                <button id="custom-back-btn" class="text-slate-500 font-bold hover:text-blue-600">‚Üê „ÇÇ„Å©„Çã</button>
                <h2 class="text-2xl font-black text-blue-600">„Åò„Å∂„Çì„ÅÆ„Éù„Ç±„É¢„É≥„Çí„Åà„Çâ„Å∂</h2>
                <button id="custom-confirm-btn"
                    class="bg-blue-600 text-white px-6 py-2 rounded-full font-bold shadow disabled:opacity-50">Ê±∫ÂÆö</button>
            </header>

            <!-- ÈÅ∏ÊäûÊ∏à„Åø„É°„É≥„Éê„ÉºË°®Á§∫: 6Êû†„Å´Êã°Âºµ -->
            <div class="grid grid-cols-6 gap-2 mb-6" id="player-slots-container">
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-0">1„Å¥„Åç„ÇÅ</div>
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-1">2„Å≤„Åç„ÇÅ</div>
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-2">3„Å≥„Åç„ÇÅ</div>
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-3">4„Å≤„Åç„ÇÅ</div>
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-4">5„Å≤„Åç„ÇÅ</div>
                <div class="member-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="slot-5">6„Å¥„Åç„ÇÅ</div>
            </div>

            <div class="pagination-controls flex justify-center items-center gap-4 mb-2">
                <button
                    class="page-btn prev-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&lt;</button>
                <span class="page-info font-mono">1 / 10</span>
                <button
                    class="page-btn next-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&gt;</button>
            </div>

            <!-- 6√ó6„Ç∞„É™„ÉÉ„Éâ„Å´Â§âÊõ¥ -->
            <div id="custom-pokemon-list"
                class="grid grid-cols-6 gap-2 h-96 overflow-y-auto p-2 border rounded-xl bg-slate-50"></div>

            <div class="pagination-controls flex justify-center items-center gap-4 mt-2">
                <button
                    class="page-btn prev-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&lt;</button>
                <span class="page-info font-mono">1 / 10</span>
                <button
                    class="page-btn next-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&gt;</button>
            </div>
        </div>

        <!-- „ÅÇ„ÅÑ„Å¶„ÅÆ„Éù„Ç±„É¢„É≥„Çí„Åà„Çâ„Å∂ÁîªÈù¢ (Âë≥ÊñπÂÅ¥UI„Å®ÂÆåÂÖ®„Å´Áµ±‰∏Ä) -->
        <div id="enemy-select-screen"
            class="hidden w-full max-w-6xl p-4 md:p-6 animate-in fade-in duration-500 bg-white/90 rounded-3xl shadow-xl backdrop-blur-sm">
            <header class="relative flex items-center justify-between mb-4">
                <button id="enemy-select-back-btn" class="text-slate-500 font-bold hover:text-blue-600">‚Üê „ÇÇ„Å©„Çã</button>
                <h2 class="text-2xl font-black text-red-600">„ÅÇ„ÅÑ„Å¶„ÅÆ„Éù„Ç±„É¢„É≥„Çí„Åà„Çâ„Å∂</h2>
                <button id="enemy-confirm-btn"
                    class="bg-red-600 text-white px-6 py-2 rounded-full font-bold shadow disabled:opacity-50">Ê±∫ÂÆö</button>
            </header>

            <!-- ÈÅ∏ÊäûÊ∏à„Åø„É°„É≥„Éê„ÉºË°®Á§∫: 6Êû† -->
            <div class="grid grid-cols-6 gap-2 mb-6" id="enemy-slots-container">
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-0">1„Å¥„Åç„ÇÅ</div>
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-1">2„Å≤„Åç„ÇÅ</div>
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-2">3„Å≥„Åç„ÇÅ</div>
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-3">4„Å≤„Åç„ÇÅ</div>
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-4">5„Å≤„Åç„ÇÅ</div>
                <div class="member-slot enemy-slot h-24 bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-[10px] text-slate-400"
                    id="enemy-slot-5">6„Å¥„Åç„ÇÅ</div>
            </div>

            <div class="pagination-controls flex justify-center items-center gap-4 mb-2">
                <button
                    class="page-btn prev-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&lt;</button>
                <span class="page-info font-mono">1 / 10</span>
                <button
                    class="page-btn next-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&gt;</button>
            </div>

            <!-- 6√ó6„Ç∞„É™„ÉÉ„Éâ„Å´Â§âÊõ¥ -->
            <div id="enemy-pokemon-list"
                class="grid grid-cols-6 gap-2 h-96 overflow-y-auto p-2 border rounded-xl bg-slate-50"></div>

            <div class="pagination-controls flex justify-center items-center gap-4 mt-2">
                <button
                    class="page-btn prev-btn bg-white border rounded px-3 py-1 shadow hover:bg-slate-50">&lt;</button>
                <span class="page-info font-mono">1 / 10</span>

            </div>
        </div>

        <!-- ÊäÄÊßãÊàêÁîªÈù¢ -->
        <div id="move-config-screen"
            class="hidden w-full max-w-6xl p-4 md:p-8 animate-in fade-in duration-500 h-[85vh] flex flex-col bg-white/90 rounded-3xl shadow-xl backdrop-blur-sm">
            <header class="relative flex items-center justify-center mb-4 shrink-0">
                <button id="move-config-back-btn" class="absolute left-0 text-slate-500 font-bold hover:text-blue-600">‚Üê
                    „ÇÇ„Å©„Çã</button>
                <h2 class="text-2xl font-black text-[#333]">„Çè„Åñ„ÅÆ Ë®≠ÂÆö</h2>
            </header>
            <div id="move-config-tabs" class="flex gap-2 justify-center mb-4 shrink-0 overflow-x-auto p-1"></div>
            <div class="flex-1 flex flex-col md:flex-row gap-4 overflow-hidden">
                <div class="w-full md:w-1/3 bg-white border border-slate-200 rounded-xl p-4 flex flex-col shadow-sm">
                    <h3 class="font-bold text-slate-600 mb-3 border-b pb-2">„Çª„ÉÉ„Éà‰∏≠„ÅÆ„Çè„Åñ (ÊúÄÂ§ß4„Å§)</h3>
                    <div id="current-moves-list" class="flex-1 flex flex-col gap-2"></div>
                </div>
                <div
                    class="flex-1 bg-white border border-slate-200 rounded-xl p-4 flex flex-col overflow-hidden shadow-sm">
                    <h3 class="font-bold text-slate-600 mb-3 border-b pb-2">Ë¶ö„Åà„Çâ„Çå„Çã„Çè„Åñ</h3>
                    <div id="learnable-moves-list"
                        class="flex-1 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-2 pr-2"></div>
                </div>
            </div>
            <div class="mt-4 text-center shrink-0">
                <button id="battle-start-final-btn"
                    class="bg-red-600 hover:bg-red-500 text-white font-black text-xl py-4 px-12 rounded-full shadow-lg transition-transform active:scale-95 animate-pulse">„Éê„Éà„É´
                    „Çπ„Çø„Éº„ÉàÔºÅ</button>
            </div>
        </div>

        <!-- „É¨„Éô„É´Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
        <div id="level-modal"
            class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] backdrop-blur-sm transition-all duration-300">
            <div
                class="bg-white p-8 rounded-3xl border border-slate-200 w-full max-w-md shadow-2xl transform transition-all scale-100">
                <h2 class="text-2xl font-bold mb-6 text-center text-[#333]">„Éê„Éà„É´„ÅÆ „Åõ„Å£„Å¶„ÅÑ</h2>
                <div class="space-y-6 mb-8">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-wider">„ÅÇ„Å™„Åü„ÅÆ
                            „É¨„Éô„É´</label>
                        <input type="number" id="player-level-input" value="50" min="1" max="100"
                            class="w-full bg-slate-50 border border-slate-300 text-[#333] p-4 rounded-xl focus:outline-none focus:border-blue-500 font-mono text-lg text-center">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-wider">„ÅÇ„ÅÑ„Å¶„ÅÆ
                            „É¨„Éô„É´</label>
                        <input type="number" id="enemy-level-input" value="50" min="1" max="100"
                            class="w-full bg-slate-50 border border-slate-300 text-[#333] p-4 rounded-xl focus:outline-none focus:border-red-500 font-mono text-lg text-center">
                    </div>
                </div>
                <div class="flex gap-4">
                    <button type="button" id="modal-cancel-btn"
                        class="flex-1 p-4 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold border border-slate-300">„ÇÑ„ÇÅ„Çã</button>
                    <button type="button" id="modal-confirm-btn"
                        class="flex-1 p-4 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-bold shadow-lg">Ê¨°„Å∏
                        (ÊäÄË®≠ÂÆö)</button>
                </div>
            </div>
        </div>

        <!-- „Éê„Éà„É´ÁîªÈù¢ -->
        <div id="battle-screen"
            class="hidden animate-in zoom-in-95 duration-500 h-[calc(100vh-150px)] w-full max-w-[1600px] mx-auto p-2 md:p-4 flex flex-col justify-start gap-4">
            <div id="battle-top-section" class="battle-top-section w-full grid grid-cols-1 gap-4 md:grid-cols-2">
                <div
                    class="battle-area flex-1 h-full bg-white border border-slate-200 rounded-2xl overflow-hidden relative shadow-xl flex flex-col">
                    <div class="flex-1 p-6 relative bg-slate-50 flex flex-col justify-between"
                        style="background-image: radial-gradient(#e2e8f0 1px, transparent 1px); background-size: 20px 20px;">
                        <!-- Êïµ„Ç®„É™„Ç¢ -->
                        <div class="flex justify-between items-start relative z-10">
                            <div class="w-full md:w-5/12">
                                <div
                                    class="bg-white/90 backdrop-blur-sm p-3 md:p-4 rounded-xl border border-slate-200 border-l-4 border-l-red-500 shadow-sm">
                                    <div class="flex justify-between items-baseline mb-2">
                                        <span id="enemy-name"
                                            class="font-black text-lg tracking-tight text-[#333]">---</span>
                                        <span class="text-slate-500 font-bold italic font-mono text-sm">Lv.<span
                                                id="enemy-level-display">--</span></span>
                                    </div>
                                    <div
                                        class="hp-bar-outer w-full bg-slate-200 rounded-full h-2 overflow-hidden border border-slate-300 mb-1">
                                        <div id="enemy-hp-bar"
                                            class="hp-bar-inner bg-gradient-to-r from-red-500 to-orange-500 h-full w-full transition-all duration-500 ease-out">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="absolute right-2 md:right-10 bottom-0 z-0 relative">
                                <div id="enemy-sprite" class="battle-sprite-container relative"></div>
                            </div>
                        </div>
                        <div class="flex flex-row-reverse justify-between items-start relative z-10 mt-8">
                            <div class="w-full md:w-5/12">
                                <div
                                    class="bg-white/90 backdrop-blur-sm p-3 md:p-4 rounded-xl border border-slate-200 border-r-4 border-r-blue-500 shadow-sm">
                                    <div class="flex justify-between items-baseline mb-2">
                                        <span id="player-name"
                                            class="font-black text-lg tracking-tight text-[#333]">---</span>
                                        <span class="text-slate-500 font-bold italic font-mono text-sm">Lv.<span
                                                id="player-level-display">--</span></span>
                                    </div>
                                    <div
                                        class="hp-bar-outer w-full bg-slate-200 rounded-full h-2 overflow-hidden border border-slate-300 mb-1">
                                        <div id="player-hp-bar"
                                            class="hp-bar-inner bg-gradient-to-r from-blue-500 to-cyan-400 h-full w-full transition-all duration-500 ease-out">
                                        </div>
                                    </div>
                                    <div class="text-right text-xs mt-1 font-mono text-slate-500"><span
                                            id="player-hp-cur">--</span>/<span id="player-hp-max">--</span></div>
                                    <!-- ÁµåÈ®ìÂÄ§„Éê„Éº -->
                                    <div class="mt-1">
                                        <div
                                            class="w-full bg-slate-700 rounded-full h-1.5 overflow-hidden border border-slate-600">
                                            <div id="player-exp-bar"
                                                class="bg-blue-400 h-full w-0 transition-all duration-300 ease-out">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="absolute left-2 md:left-10 bottom-0 z-0 relative">
                                <div id="player-sprite" class="battle-sprite-container relative"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="list-column flex flex-col gap-4 h-full">
                    <div id="side-panel"
                        class="bg-white border border-slate-200 rounded-2xl flex flex-col overflow-hidden shadow-xl h-full">
                        <div class="flex-1 relative overflow-hidden p-3 flex flex-col justify-center">
                            <div id="command-menu" class="hidden h-full flex flex-col justify-center gap-2">
                                <div class="grid grid-cols-2 gap-2 h-full max-h-60">
                                    <div class="cmd-btn border-2 border-slate-200 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all active:scale-95 relative"
                                        data-cmd="tatakau">
                                        <div class="flex flex-col items-center"><span
                                                class="cmd-label text-lg font-bold">„Åü„Åü„Åã„ÅÜ</span><span
                                                class="text-xs font-mono text-slate-200">tatakau</span></div>
                                        <span
                                            class="cmd-input font-mono text-slate-200 absolute bottom-1 right-2 text-sm font-bold"></span>
                                        <span class="cmd-selected-move text-[10px] text-slate-400 mt-1"></span>
                                    </div>
                                    <div class="cmd-btn border-2 border-slate-200 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all active:scale-95 relative"
                                        data-cmd="dougu">
                                        <div class="flex flex-col items-center"><span
                                                class="cmd-label text-lg font-bold">„Å©„ÅÜ„Åê</span><span
                                                class="text-xs font-mono text-slate-200">dougu</span></div>
                                        <span
                                            class="cmd-input font-mono text-slate-200 absolute bottom-1 right-2 text-sm font-bold"></span>
                                    </div>
                                    <div class="cmd-btn border-2 border-slate-200 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all active:scale-95 relative"
                                        data-cmd="pokemon">
                                        <div class="flex flex-col items-center"><span
                                                class="cmd-label text-lg font-bold">„Éù„Ç±„É¢„É≥</span><span
                                                class="text-xs font-mono text-slate-200">pokemon</span></div>
                                        <span
                                            class="cmd-input font-mono text-slate-200 absolute bottom-1 right-2 text-sm font-bold"></span>
                                    </div>
                                    <div class="cmd-btn border-2 border-slate-200 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all active:scale-95 relative"
                                        data-cmd="nigeru">
                                        <div class="flex flex-col items-center"><span
                                                class="cmd-label text-lg font-bold">„Å´„Åí„Çã</span><span
                                                class="text-xs font-mono text-slate-200">nigeru</span></div>
                                        <span
                                            class="cmd-input font-mono text-slate-200 absolute bottom-1 right-2 text-sm font-bold"></span>
                                    </div>
                                </div>
                            </div>
                            <div id="move-menu" class="hidden absolute inset-0 bg-white z-40 p-4 flex flex-col">
                                <div class="flex justify-between items-end mb-2 border-b border-slate-200 pb-2">
                                    <h3 class="text-lg font-bold text-[#333]">„Çè„Åñ</h3>
                                </div>
                                <div id="move-list" class="flex-1 flex flex-col gap-2"></div>
                            </div>
                            <div id="item-menu" class="hidden absolute inset-0 bg-white z-40 p-4 flex flex-col">
                                <div class="flex justify-between items-end mb-2 border-b border-slate-200 pb-2">
                                    <h3 class="text-lg font-bold text-[#333]">„Å©„ÅÜ„Åê</h3>
                                </div>
                                <div id="item-list"
                                    class="flex-1 overflow-y-auto flex flex-col gap-2 pb-2 content-start pr-1"></div>
                            </div>
                            <div id="pokemon-menu" class="hidden absolute inset-0 bg-white z-40 p-4 flex flex-col">
                                <div class="flex justify-between items-end mb-2 border-b border-slate-200 pb-2">
                                    <h3 id="pokemon-menu-title" class="text-lg font-bold text-[#333]">„Éù„Ç±„É¢„É≥</h3>
                                </div>
                                <div id="party-list"
                                    class="flex-1 overflow-y-auto flex flex-col gap-2 pb-2 content-start pr-1"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="battle-middle-section" class="battle-middle-section w-full grid grid-cols-1 gap-4 md:grid-cols-2">
                <div id="battle-message-area"
                    class="battle-message-area bg-white/90 border border-slate-200 rounded-2xl p-3 shadow-inner flex items-center justify-start">
                    <p id="battle-message"
                        class="text-base font-bold text-[#333] tracking-widest typing-cursor text-left">...</p>
                </div>
                <div id="typing-panel"
                    class="typing-display-panel hidden bg-white border border-slate-200 rounded-2xl shadow-inner p-4 flex flex-col justify-center items-center space-y-2">
                    <div id="typing-kana" class="text-2xl font-black text-slate-500">ÊäÄÂêç</div>
                    <div id="typing-roman" class="text-3xl font-mono font-bold tracking-widest text-[#333] select-none">
                    </div>
                </div>
            </div>
            <div id="keyboard-column"
                class="hidden battle-keyboard-section w-full bg-white/90 border border-slate-200 rounded-2xl shadow-xl p-4 max-h-full overflow-hidden">
                <div id="onscreen-keyboard" class="max-w-full w-full mx-auto flex flex-col gap-1.5 select-none">
                    <div class="flex justify-center gap-1">
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="1">1</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="2">2</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="3">3</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="4">4</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="5">5</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="6">6</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="7">7</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="8">8</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="9">9</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="0">0</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="-">„Éº</div>
                    </div>
                    <div class="flex justify-center gap-1">
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="q">Q</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="w">W</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="e">E</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="r">R</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="t">T</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="y">Y</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="u">U</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="i">I</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="o">O</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="p">P</div>
                    </div>
                    <div class="flex justify-center gap-1 pl-2">
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="a">A</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="s">S</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="d">D</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="f">F</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="g">G</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="h">H</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="j">J</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="k">K</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="l">L</div>
                    </div>
                    <div class="flex justify-center gap-1 pl-4">
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="z">Z</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="x">X</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="c">C</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="v">V</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="b">B</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="n">N</div>
                        <div class="kb-key bg-white rounded p-2 text-center font-bold shadow active:bg-blue-100"
                            data-key="m">M</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="get-stage-modal" class="get-stage-modal hidden" role="dialog" aria-modal="true"
        aria-labelledby="get-stage-title">
        <div class="get-stage-card">
            <header class="get-stage-card-header">
                <p class="text-xs uppercase tracking-[0.4em] text-slate-400 mb-1">GET„Çπ„ÉÜ„Éº„Ç∏</p>
                <h3 id="get-stage-title" class="text-2xl font-black text-slate-900 mb-1">„Åª„ÅÜ„Å≥„Çí „Åà„Çâ„Åº„ÅÜ</h3>
                <p id="get-stage-description" class="text-sm text-slate-500">„Çπ„ÉÜ„Éº„Ç∏„ÅÆ „Åª„ÅÜ„Å≥„Çí „ÅÜ„Åë„Å®„Çä„Åæ„Åô„ÄÇ</p>
            </header>
            <div id="get-stage-type-label" class="text-xs font-bold uppercase tracking-[0.3em] text-emerald-600 mb-2">
            </div>
            <p id="get-stage-instructions" class="text-sm text-slate-500 mb-4"></p>
            <div id="get-stage-reward-list" class="get-stage-reward-list"></div>
            <div class="modal-actions mt-6 justify-end gap-3">
                <button id="get-stage-cancel-btn" class="btn-secondary px-4 py-2 rounded-full">„ÇÑ„ÇÅ„Çã</button>
                <button id="get-stage-confirm-btn"
                    class="px-4 py-2 rounded-full bg-emerald-500 text-white font-bold shadow-lg">„ÅÜ„Åë„Å®„Çã</button>
            </div>
        </div>
    </div>

    <div id="story-pokemon-box-overlay" class="story-pokemon-box-overlay hidden" role="dialog" aria-modal="true"
        aria-labelledby="story-pokemon-box-title">
        <div class="story-pokemon-box-card">
            <header class="story-pokemon-box-header">
                <div>
                    <p class="text-xs text-slate-500">„Å¶„ÇÇ„Å° & „Éú„ÉÉ„ÇØ„Çπ</p>
                    <h3 id="story-pokemon-box-title" class="text-xl font-black text-slate-900">„Éù„Ç±„É¢„É≥„Éú„ÉÉ„ÇØ„Çπ</h3>
                </div>
                <button id="story-pokemon-box-close-btn" class="story-pokemon-box-close"
                    aria-label="„Éù„Ç±„É¢„É≥„Éú„ÉÉ„ÇØ„Çπ„ÇíÈñâ„Åò„Çã">√ó</button>
            </header>
            <div class="flex justify-between items-center px-4 mb-2">
                <input type="text" id="story-box-search-input" placeholder="UUIDÊ§úÁ¥¢..."
                    class="text-xs border rounded px-2 py-1 flex-1 mr-2" style="max-width: 150px;">
                <div class="flex gap-2">
                    <button id="story-box-organize-btn"
                        class="text-xs font-bold px-3 py-1 rounded-full border border-slate-300 bg-white text-emerald-600 hover:bg-slate-100 transition-colors">
                        „Éú„ÉÉ„ÇØ„ÇπÊï¥ÁêÜ
                    </button>
                    <button id="story-box-sort-btn"
                        class="text-xs font-bold px-3 py-1 rounded-full border border-slate-300 bg-white text-slate-600 hover:bg-slate-100 transition-colors">
                        ‰∏¶„Å≥Êõø„Åà
                    </button>
                </div>
            </div>
            <div id="story-pokemon-party" class="story-pokemon-party" aria-label="„Å¶„ÇÇ„Å°„Éù„Ç±„É¢„É≥"></div>
            <div id="story-pokemon-box-grid" class="story-pokemon-box-grid" aria-label="„Éú„ÉÉ„ÇØ„ÇπÊ†ºÁ¥ç„Éù„Ç±„É¢„É≥"></div>
            <p class="story-pokemon-box-note">„Éù„Ç±„É¢„É≥„Çí„Çø„ÉÉ„Éó„Åó„Å¶ „Åà„Çâ„Å≥„ÄÅÂà•„ÅÆ„Éû„Çπ„Å´„Çø„ÉÉ„Éó„Åô„Çã„Å®ÂÖ•„Çå„Åã„Çè„Çä„Åæ„Åô„ÄÇÁ©∫„Åç„Éû„Çπ„Å´„ÅØ „Åù„ÅÆ„Åæ„Åæ ÁßªÂãï„Åó„Åæ„Åô„ÄÇ</p>
        </div>
    </div>

    <!-- Pokemon Action Modal -->
    <div id="pokemon-action-modal" class="hidden modal-overlay">
        <div class="modal-card">
            <h3 id="pokemon-action-title" class="text-xl font-bold text-slate-900 mb-1">„Éù„Ç±„É¢„É≥„ÅÆÊìç‰Ωú</h3>
            <p id="pokemon-action-uuid" class="text-xs text-slate-400 font-mono mb-4 text-center break-all select-all">
            </p>
            <div class="flex flex-col gap-2">
                <button id="pokemon-action-move-config"
                    class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                        </path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    ÊäÄ„ÇíË®≠ÂÆö
                </button>
                <button id="pokemon-action-rename"
                    class="w-full bg-slate-500 hover:bg-slate-600 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z">
                        </path>
                    </svg>
                    ÂêçÂâç„ÇíÂ§â„Åà„Çã
                </button>
                <button id="pokemon-action-release"
                    class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                        </path>
                    </svg>
                    ÈÄÉ„Åå„Åô
                </button>
            </div>
            <div class="modal-actions mt-4">
                <button id="pokemon-action-cancel" class="btn-secondary px-4 py-2 rounded-full">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „Éà„É¨„Éº„Éä„Éº„Éê„Éà„É´„É¢„Éº„ÉÄ„É´ -->
    <div id="trainer-battle-modal" class="get-stage-modal hidden" role="dialog" aria-modal="true"
        aria-labelledby="trainer-battle-title">
        <div class="get-stage-card">
            <header class="get-stage-card-header">
                <p class="text-xs uppercase tracking-[0.4em] text-slate-400 mb-1">„Éà„É¨„Éº„Éä„Éº„Éê„Éà„É´</p>
                <h3 id="trainer-battle-title" class="text-2xl font-black text-slate-900 mb-1">---</h3>
                <p id="trainer-battle-stage-name" class="text-sm text-slate-500 mb-2">---</p>
            </header>
            <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 mb-4">
                <p id="trainer-battle-message" class="text-base text-slate-700 leading-relaxed"></p>
            </div>
            <div class="mb-4">
                <p class="text-xs font-bold text-slate-500 uppercase tracking-wide mb-2">„Éà„É¨„Éº„Éä„Éº„ÅÆ „Éù„Ç±„É¢„É≥:</p>
                <div id="trainer-pokemon-list" class="grid grid-cols-3 gap-2"></div>
            </div>
            <div id="battle-chain-config" class="mb-4 hidden flex items-center justify-end">
                <label for="battle-chain-count"
                    class="text-xs font-bold text-slate-500 uppercase tracking-wide mr-2">„Çå„Çì„Åû„Åè:</label>
                <input type="number" id="battle-chain-count"
                    class="border border-slate-300 rounded px-2 py-1 w-16 text-center font-bold" value="1" min="1"
                    max="10">
                <span class="text-xs text-slate-500 ml-1 font-bold">„Åã„ÅÑ</span>
            </div>
            <div class="modal-actions mt-6 justify-end gap-3">
                <button id="trainer-battle-cancel-btn" class="btn-secondary px-4 py-2 rounded-full">„ÇÇ„Å©„Çã</button>
                <button id="trainer-battle-start-btn"
                    class="px-4 py-2 rounded-full bg-red-500 text-white font-bold shadow-lg hover:bg-red-600">„Éê„Éà„É´„ÄÄ„Çπ„Çø„Éº„ÉàÔºÅ</button>
            </div>
        </div>
    </div>

    <!-- Evolution Modal -->
    <div id="evolution-modal" class="hidden modal-overlay" style="z-index: 9999;">
        <div class="modal-card flex flex-col items-center">
            <h3 class="text-2xl font-black text-slate-900 mb-2">„Åä„ÇÑ...Ôºü</h3>
            <p id="evolution-message" class="text-lg text-slate-700 mb-8 font-bold text-center">ÊßòÂ≠ê„Åå „Åä„Åã„Åó„ÅÑ„Åû...ÔºÅ</p>

            <div class="relative w-48 h-48 mb-8 flex items-center justify-center">
                <div id="evolution-sprite-container" class="relative w-full h-full">
                    <!-- Images will be injected here -->
                </div>
            </div>

            <div class="modal-actions justify-center w-full">
                <button id="evolution-confirm-btn"
                    class="hidden px-8 py-3 rounded-full bg-blue-600 text-white font-bold shadow-lg animate-bounce">Ê¨°„Å∏</button>
            </div>
        </div>
    </div>

    <!-- System Message Modal -->
    <div id="system-message-modal" class="hidden modal-overlay" style="z-index: 9999;">
        <div class="modal-card">
            <h3 id="system-modal-title" class="text-xl font-bold text-slate-900 mb-4">„ÅäÁü•„Çâ„Åõ</h3>
            <p id="system-modal-message" class="text-slate-700 mb-6 whitespace-pre-wrap"></p>
            <div id="system-modal-input-container" class="hidden mb-6">
                <input type="text" id="system-modal-input"
                    class="w-full border-2 border-slate-200 rounded-lg px-4 py-2 text-slate-700 font-bold focus:border-blue-500 focus:outline-none transition-colors"
                    placeholder="">
            </div>
            <div class="modal-actions justify-end gap-3">
                <button id="system-modal-cancel-btn" class="btn-secondary px-4 py-2 rounded-full hidden">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="system-modal-ok-btn"
                    class="px-6 py-2 rounded-full bg-blue-600 text-white font-bold shadow-lg">Enter</button>
            </div>
        </div>
    </div>

    <!-- Scripts: assets/js/ „Éï„Ç©„É´„ÉÄ„Å´„ÅÇ„ÇãÂ∞èÊñáÂ≠ó„ÅÆ„Éï„Ç°„Ç§„É´Âêç„ÇíÊåáÂÆö -->
    <script src="assets/js/utils.js" onerror="handleScriptError('assets/js/utils.js')"></script>
    <script src="assets/js/exp-table.js" onerror="handleScriptError('assets/js/exp-table.js')"></script>
    <script src="assets/js/story-manager.js" onerror="handleScriptError('assets/js/story-manager.js')"></script>
    <script src="assets/js/data-loader.js" onerror="handleScriptError('assets/js/data-loader.js')"></script>
    <script src="assets/js/typing-engine.js" onerror="handleScriptError('assets/js/typing-engine.js')"></script>
    <script src="assets/js/type-chart.js" onerror="handleScriptError('assets/js/type-chart.js')"></script>
    <script src="assets/js/move-utils.js" onerror="handleScriptError('assets/js/move-utils.js')"></script>
    <script src="assets/js/move-config-screen.js"
        onerror="handleScriptError('assets/js/move-config-screen.js')"></script>
    <script src="assets/js/battle-manager.js" onerror="handleScriptError('assets/js/battle-manager.js')"></script>
    <script src="assets/js/audiomanager.js" onerror="handleScriptError('assets/js/audiomanager.js')"></script>
    <script src="assets/js/save-manager.js" onerror="handleScriptError('assets/js/save-manager.js')"></script>
    <script src="assets/js/main.js" onerror="handleScriptError('assets/js/main.js')"></script>
</body>

</html>